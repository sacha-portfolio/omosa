{%- if shop.customer_accounts_enabled -%}
  <a
    href="{%- if customer -%}{{ routes.account_url }}{%- else -%}{{ routes.account_login_url }}{%- endif -%}"
    class="
      header__icon header__icon--account
      link
      focus-inset
      {% if block.settings.hide_on_desktop %}md:hidden!{% else %}md:inline-flex!{% endif %}
      {% if block.settings.hide_on_mobile %}hidden{% else %}inline-flex{% endif %}
    "
    rel="nofollow"
  >
    {%- if block.settings.enable_customer_avatar -%}
      <account-icon>
        {%- if customer and customer.has_avatar? -%}
          {{ customer | avatar }}
        {%- else -%}
          <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
        {%- endif -%}
      </account-icon>
    {%- else -%}
      <span class="svg-wrapper">{{ 'icon-account.svg' | inline_asset_content }}</span>
    {%- endif -%}
    <span class="visually-hidden">
      {%- liquid
        if customer
          echo 'customer.account_fallback' | t
        else
          echo 'customer.log_in' | t
        endif
      -%}
    </span>
  </a>
{%- endif -%}

{% schema %}
{
  "name": "Account",
  "tag": null,
  "settings": [
    {
      "type": "checkbox",
      "id": "enable_customer_avatar",
      "default": true,
      "label": "t:sections.header.settings.enable_customer_avatar.label",
      "info": "t:sections.header.settings.enable_customer_avatar.info"
    },
    {
      "type": "header",
      "content": "Display"
    },
    {
      "type": "checkbox",
      "id": "hide_on_desktop",
      "label": "Hide on desktop",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "hide_on_mobile",
      "label": "Hide on mobile",
      "default": false
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "checkbox",
      "id": "flex_basis_style",
      "label": "Flex basis",
      "default": false
    },
    {
      "type": "range",
      "id": "flex_basis",
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "Flex basis",
      "default": 0,
      "visible_if": "{{ block.settings.flex_basis_style }}"
    }
  ],
  "presets": [
    {
      "name": "Account",
      "category": "t:categories.header"
    }
  ]
}
{% endschema %}
